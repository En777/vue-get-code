var VueGetCode=function(e){"use strict";var t=function(e,t,n,o,i,s,r,a,d,c){"boolean"!=typeof r&&(d=a,a=r,r=!1);var l,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),o&&(u._scopeId=o),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=l):t&&(l=r?function(){t.call(this,c(this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),l)if(u.functional){var f=u.render;u.render=function(e,t){return l.call(t),f(e,t)}}else{var _=u.beforeCreate;u.beforeCreate=_?[].concat(_,l):[l]}return n},n={name:"VueGetCode",props:{getCode:{required:!0,type:Function},interval:{default:60,type:Number},disable:{default:!1,type:Boolean}},data:function(){return{timer:null,seconds:0,enableCountdown:!1}},watch:{disable:function(e){e&&this.timer&&this.reset()}},destroyed:function(){this.reset()},methods:{click:function(){var e=this;this.enableCountdown||this.disable||(this.seconds=0,this.enableCountdown=!0,this.timer=setInterval(function(){e.seconds++,(e.seconds>=e.interval||e.disable)&&e.reset()},1e3),new Promise(function(t,n){var o;try{o=e.getCode()}catch(e){n(e)}t(o)}).catch(function(){e.reset()}))},reset:function(){clearInterval(this.timer),this.timer=null,this.seconds=0,this.enableCountdown=!1}}},o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",e._g(e._b({staticClass:"vue-get-code",class:[e.disable&&"disable",e.enableCountdown&&"enable-countdown"],on:{click:e.click}},"span",e.$attrs,!1),e.$listeners),[e.enableCountdown?e._e():e._t("default",function(){return[e._v("获取验证码")]}),e._v(" "),e.enableCountdown?e._t("countdown",function(){return[e._v(e._s(e.interval-e.seconds)+"S")]},{data:{interval:e.interval,seconds:e.seconds}}):e._e()],2)};o._withStripped=!0;var i=t({render:o,staticRenderFns:[]},void 0,n,void 0,!1,void 0,void 0,void 0);i.install=function(e){e.component(i.name,i)};var s=null;return"undefined"!=typeof window?s=window.Vue:"undefined"!=typeof global&&(s=global.Vue),s&&s.use(i),e.default=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
