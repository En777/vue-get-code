var VueGetCode=function(e){"use strict";var n=function(e,n,t,o,s,i,r,d,a,c){"boolean"!=typeof r&&(a=d,d=r,r=!1);var l,u="function"==typeof t?t.options:t;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,s&&(u.functional=!0)),o&&(u._scopeId=o),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=l):n&&(l=r?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(e){n.call(this,d(e))}),l)if(u.functional){var f=u.render;u.render=function(e,n){return l.call(n),f(e,n)}}else{var v=u.beforeCreate;u.beforeCreate=v?[].concat(v,l):[l]}return t},t={name:"VueGetCode",props:{getCode:{required:!0,type:Function},interval:{default:60,type:Number},disable:{default:!1,type:Boolean}},data:function(){return{timer:null,seconds:0,enableCountdown:!1,count:0}},watch:{disable:function(e){e&&this.timer&&this.reset()}},destroyed:function(){this.reset()},methods:{click:function(){var e=this;this.enableCountdown||this.disable||(this.seconds=0,this.enableCountdown=!0,new Promise(function(n,t){var o;try{o=e.getCode()}catch(e){t(e)}n(o)}).catch(function(n){e.$emit("getCodeError",n),e.reset()}).then(function(){e.count++,e.$emit("countdownBegin",e.seconds,e.interval),e.timer=setInterval(function(){e.seconds++,e.disable?e.reset():(e.$emit("countdownUpdate",e.seconds,e.interval),e.seconds>=e.interval&&(e.$emit("countdownEnd",e.seconds,e.interval),e.reset()))},1e3)}))},reset:function(){clearInterval(this.timer),this.timer=null,this.seconds=0,this.enableCountdown=!1}}},o=function(){var e=this,n=e.$createElement;return(e._self._c||n)("span",e._g(e._b({staticClass:"vue-get-code",class:[e.disable&&"disable",e.enableCountdown&&"enable-countdown"],on:{click:e.click}},"span",e.$attrs,!1),e.$listeners),[e.enableCountdown?e._e():e._t("default",[e._v("获取验证码")],{data:{interval:e.interval,seconds:e.seconds,count:e.count}}),e._v(" "),e.enableCountdown?e._t("countdown",[e._v(e._s(e.interval-e.seconds)+"S")],{data:{interval:e.interval,seconds:e.seconds}}):e._e()],2)};o._withStripped=!0;var s=n({render:o,staticRenderFns:[]},void 0,t,void 0,!1,void 0,void 0,void 0);s.install=function(e){e.component(s.name,s)};var i=null;return"undefined"!=typeof window?i=window.Vue:"undefined"!=typeof global&&(i=global.Vue),i&&i.use(s),e.default=s,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
